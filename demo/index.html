<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Performance Demo</title>
    <script type='text/javascript' src='../dist/fe-supervisor.sdk.js'></script>
    <script type='text/javascript' src='../dist/main.js'></script>
    <link rel="stylesheet" href="./assets/main.css">
    <link rel="stylesheet" href="./assets/test.css">
  </head>
  <body>
    <section>
      <div>
        图片1
        <img src="./assets/1.png" alt="">
      </div>
  
      <div>
        图片3
        <img src="./assets/3.png" alt="">
      </div>
  
      <div>
        图片4
        <img src="http://cdn.himalaya.com/de6f28f0637f480297f90ca11ed2bddd.png?auth_key=4102416000-1234-0-ddae5ef02baf29dd7463f122353bdbd1" alt="">
      </div>

      <div>
        图片5
        <img src="https://s1.himalaya.com/images/logo_dc4fce7.png" alt="">
      </div>

      <div>
        图片6
        <img src="https://is2-ssl.mzstatic.com/image/thumb/Music123/v4/ff/6b/70/ff6b70e8-dd1d-a058-f22d-c31ed548195a/source/600x600bb.jpg" alt="">
      </div>

      <div>
        图片7
        <img src="https://is5-ssl.mzstatic.com/image/thumb/Music123/v4/33/0a/15/330a1563-f88e-9897-c0a9-a7d4c086bb72/source/600x600bb.jpg" alt="">
      </div>

      <div>
        图片8
        <img src="https://is3-ssl.mzstatic.com/image/thumb/Music113/v4/a0/6b/d7/a06bd787-e07c-5afb-ec4b-33efd7e78f72/source/600x600bb.jpg" alt="">
      </div>
    </section>
    <div>
      图片2
      <img src="./assets/2.png" alt="">
    </div>
    <div>
      <button onclick="addImg()">点我加图</button>
    </div>

    <div>
      <button onclick="execErr()">点我js出错</button>
    </div>

    <div>
      <button onclick="changeSrc()">改img的src</button>
    </div>
    <div id='pool'></div>
  </body>
  <script type='text/javascript'>
    function addImg() {
      const pool = document.querySelector('#pool')
      $sv.observeError(pool, function (dom, e) {
        console.log('errObj', dom, e)
      })
      const img = new Image()
      img.src = './assets/5.png'

      const img1 = new Image()
      img1.src = 'https://is5-ssl.mzstatic.com/image/thumb/Music123/v4/ad/e0/f5/ade0f59d-b5b0-ef09-19de-d3f77b50083c/source/600x600bb.jpg'
      img1.id = 'change'

      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = './assets/empty.css'

      const script = document.createElement('script')
      script.type = 'text/javascript'
      script.src = './assets/empty.js'

      const span = document.createElement('span')
      span.innerText = 'Span 标签'

      const btn = document.createElement('button')
      btn.innerText = '点我加图'
      btn.onclick = function () {
        const img = new Image()
        img.src = 'http://cdn.himalaya.com/ffcbed161570481e9c6062cb758eb549.png?auth_key=4102416000-1234-0-1b72a9d5970fc5c1d4f26445887474b1'
        const img1 = new Image()
        img1.src = 'https://is4-ssl.mzstatic.com/image/thumb/Music113/v4/48/8c/2b/488c2be3-c5c4-13da-73c5-1f1077662abc/source/300x300bb.jpg'
        const img2 = new Image()
        img2.src = './assets/6.png'
        const div1 = document.createElement('div')
        div1.appendChild(img1)

        div.appendChild(img)
        div.appendChild(div1)
        div.appendChild(img2)
      }

      const div = document.createElement('div')
      div.appendChild(img)
      div.appendChild(img1)
      div.appendChild(span)
      div.appendChild(btn)

      pool.appendChild(div)
      pool.appendChild(link)
      pool.appendChild(script)
      setTimeout(() => {
        $sv.observeSource(pool, function (source) {
          console.log('source', source)
        })
      })
    }

    function execErr () {
      {
        typeof test === 'number' && console.log(123)
        let test = 1
      }
    }

    function changeSrc () {
      const img = document.getElementById('change')
      img.src = './assets/2.png'
    }

  </script>
  <script>
  </script>
</html>